https://juejin.cn/post/7145447742515445791#heading-3

# 原理

1. 鼠标三个事件:`mousedown`,`mousemove`,`mouseup`
   - 当点击按下的时候,克隆一个绝对定位的元素,并标识为拖拽中的状态.
   - 在`mousemove`中判断应该执行的具体方法,从而让元素随着鼠标移动起来
2. 监听事件的 event 对象中的参数:
   - clientX,clientY 标识鼠标当前的横纵坐标
   - offsetX 和 offsetY 表示相对偏移量;初始值是`mousedown`按下时候记录的初始坐标
   - `mouseup` 抬起时候判断是否在目标区域中,
     - 如果在则获取当前的偏移量,也就是在目标区域中的位置

# 基础页面

两栏布局页面

## 实现元素抓取

1. 利用事件委托机制,对 img 列表添加 mousedown 事件监听
   - 鼠标按下时候克隆按下的元素,并把克隆出来的元素设置成绝对定位
   - 添加浮动的样式,让其浮动起来

# 在react中实现

拖拽过程涉及两个对象：被拖拽元素和可释放目标

### 被拖拽元素

默认情况下，图片、链接和文本是可拖动的。HTML5 在所有 HTML 元素上规定了一个 `draggable` 属性， 表示元素是否可以拖动。图片和链接的 draggable 属性自动被设置为 true，而其他所有元素此属性的默认值为 false。

某个元素被拖动时，会依次触发以下事件:

- `ondragstart`：拖动开始，当鼠标按下并且开始移动鼠标时，触发此事件；整个周期只触发一次；
- `ondrag`：只要元素仍被拖拽，就会持续触发此事件；
- `ondragend`：拖拽结束，当鼠标松开后，会触发此事件；整个周期只触发一次。

### 可释放目标

当把拖拽元素移动到一个有效的放置目标时，目标对象会触发以下事件：

- `ondragenter`：只要一把拖拽元素移动到目标时，就会触发此事件；
- `ondragover`：拖拽元素在目标中拖动时，会持续触发此事件；
- `ondragleave` 或 `ondrop`：拖拽元素离开目标时（没有在目标上放下），会触发`ondragleave`；当拖拽元素在目标放下（松开鼠标），则触发`ondrop`事件。

**目标元素默认是不能够被拖放的，即不会触发 `ondrop` 事件，可以通过在目标元素的 `ondragover` 事件中取消默认事件来解决此问题**

### 拖拽操作中的数据传输

除非数据受影响，否则简单的拖放并没有实际意义。为实现拖动操作中的数据传输，`event` 对象上暴露了 `dataTransfer` 对象，用于从被拖动元素向放置目标传递字符串数据。我们使用它来通知画布，当前需要渲染的组件是什么。

dataTransfer 对象主要有两个方法：getData() 和 setData()，分别用来获取和存储值。setData()的第一个参数以及 getData()的唯一参数是一个字符串，表示要设置的数据类型："text"或"URL"

> 虽然这两种数据类型是 IE 最初引入的，但 HTML5 已经将其扩展为允许任何 MIME 类型。为向后 兼容，HTML5 还会继续支持"text"和"URL"，但它们会分别被映射到"text/plain"和"text/uri-list”

需要注意的是：存储在 dataTransfer 对象中的数据只能在放置事件中读取。如果没有在 ondrop 事件中取得这些数据，dataTransfer 对象就会被销毁，数据也会丢失。